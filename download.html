<script>
const jenjangSelect = document.getElementById('jenjang');
const kelasSelect = document.getElementById('kelas');
const mapelSelect = document.getElementById('mapel');
const labelKelas = document.getElementById('label-kelas');
const labelMapel = document.getElementById('label-mapel');
const materiDiv = document.getElementById('materi');
const file1 = document.getElementById('file1');
const file2 = document.getElementById('file2');
const materiTitle = document.getElementById('materi-title');
const materiKeterangan = document.getElementById('materi-keterangan');

const kelasData = { 
    sd: [{val: 1, text: 'Kelas 1'}, {val: 2, text: 'Kelas 2'}, {val: 3, text: 'Kelas 3'}, {val: 4, text: 'Kelas 4'}, {val: 5, text: 'Kelas 5'}, {val: 6, text: 'Kelas 6'}], 
    smp: [{val: 7, text: 'Kelas 7'}, {val: 8, text: 'Kelas 8'}, {val: 9, text: 'Kelas 9'}], 
    sma: [{val: 10, text: 'Kelas 10'}, {val: 11, text: 'Kelas 11'}, {val: 12, text: 'Kelas 12'}]
};

// DATA MATA PELAJARAN LENGKAP - INI BAGIAN YANG DIPERBAIKI
const mapelData = {
    // SD KELAS 1-6
    'sd-1':['B.Indonesia','Matematika','B.Sunda','PAI','IPAS','PJOK','Seni Budaya'],
    'sd-2':['B.Indonesia','Matematika','B.Sunda','PAI','IPAS','PJOK','Seni Budaya'],
    'sd-3':['B.Indonesia','Matematika','B.Sunda','PAI','IPAS','PJOK','Seni Budaya'],
    'sd-4':['B.Indonesia','Matematika','Ilmu Pengetahuan Alam','Ilmu Pengetahuan Sosial','B.Inggris','PAI','PJOK','Seni Budaya'],
    'sd-5':['B.Indonesia','Matematika','Ilmu Pengetahuan Alam','Ilmu Pengetahuan Sosial','B.Inggris','PAI','PJOK','Seni Budaya'],
    'sd-6':['B.Indonesia','Matematika','Ilmu Pengetahuan Alam','Ilmu Pengetahuan Sosial','B.Inggris','PAI','PJOK','Seni Budaya'],

    // SMP KELAS 7-9
    'smp-7':['B.Indonesia','Matematika','IPA','IPS','B.Inggris','Seni Budaya','PJOK','Informatika'],
    'smp-8':['B.Indonesia','Matematika','IPA','IPS','B.Inggris','Seni Budaya','PJOK','Informatika'],
    'smp-9':['B.Indonesia','Matematika','IPA','IPS','B.Inggris','Seni Budaya','PJOK','Informatika'],
    
    // SMA KELAS 10-12
    'sma-10':['B.Indonesia','Matematika','Fisika','Kimia','Biologi','B.Inggris','Sejarah','Ekonomi'],
    'sma-11':['B.Indonesia','Matematika','Fisika','Kimia','Biologi','B.Inggris','Sejarah','Ekonomi'],
    'sma-12':['B.Indonesia','Matematika','Fisika','Kimia','Biologi','B.Inggris','Sejarah','Ekonomi'],
};


function resetSelection(fromSelect) {
    if (fromSelect !== 'jenjang') {
        kelasSelect.style.display='none';
        labelKelas.style.display='none';
        kelasSelect.innerHTML='';
    }
    if (fromSelect !== 'kelas') {
        mapelSelect.style.display='none';
        labelMapel.style.display='none';
        mapelSelect.innerHTML='';
    }
    materiDiv.style.display='none';
    file1.style.display='none';
    file2.style.display='none';
}


jenjangSelect.addEventListener('change', ()=>{
  const jenjang = jenjangSelect.value;
  resetSelection('jenjang');

  if(jenjang){
    labelKelas.style.display='block';
    kelasSelect.style.display='block';
    kelasSelect.innerHTML='<option value="">-- Pilih Kelas --</option>';
    
    kelasData[jenjang].forEach(k=>{
      const option = document.createElement('option');
      option.value = k.val;
      option.text = k.text;
      kelasSelect.add(option);
    });
  }
});

kelasSelect.addEventListener('change', ()=>{
  const jenjang = jenjangSelect.value;
  const kelas = kelasSelect.value;
  resetSelection('kelas');
  
  if(kelas){
    const key = jenjang+'-'+kelas;
    const mapels = mapelData[key];
    
    if(mapels){
      labelMapel.style.display='block';
      mapelSelect.style.display='block';
      mapelSelect.innerHTML='<option value="">-- Pilih Mata Pelajaran --</option>';
      mapels.forEach(m=>{
        const option = document.createElement('option');
        option.value = m;
        option.text = m;
        mapelSelect.add(option);
      });
    }
  }
});

mapelSelect.addEventListener('change', ()=>{
  const jenjang = jenjangSelect.value;
  const kelas = kelasSelect.value;
  const mapel = mapelSelect.value;

  file1.style.display = 'none';
  file2.style.display = 'none';

  if(mapel){
    materiDiv.style.display='block';
    materiTitle.textContent = "File Tersedia untuk di *Review*";
    materiKeterangan.textContent = "Klik tombol di bawah ini untuk melihat file PDF.";
    
    // Logika penentuan file dan URL
    if (jenjang === 'sd' && kelas === '1' && mapel === 'B.Indonesia') {
        // PATH: Pastikan file ada di folder 'perangkat' di GitHub Anda
        file1.href = `perangkat/rpp-bahasa-indonesia-kelas1-bab1.pdf`; 
        file2.href = `perangkat/rpp-bahasa-indonesia-kelas1-bab2.pdf`;
        
        file1.textContent = `Review RPP ${mapel} Kelas ${kelas} - Bab 1`;
        file2.textContent = `Review RPP ${mapel} Kelas ${kelas} - Bab 2`;

        file1.style.display = 'block';
        file2.style.display = 'block';
    } else {
        // Kasus file belum tersedia
        materiTitle.textContent = "Mohon Maaf";
        materiKeterangan.textContent = `Perangkat ajar untuk ${mapel} Kelas ${kelas} saat ini belum tersedia.`;
        file1.style.display = 'none';
        file2.style.display = 'none';
    }
    
    materiDiv.scrollIntoView({ behavior: 'smooth' });
  } else {
    materiDiv.style.display='none';
  }
});
</script>
